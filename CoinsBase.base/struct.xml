<?xml version="1.0" encoding="UTF-8"?>
<base name="Монеты Российской Империи" startTable="TypesView">
  
   <node name="TypesView" defaultSortColumn="3">
    <mainChild name="SubtypesView"/>
    <childNode name="SubtypesView" relation="typeID"/>
    <childNode name="SubtypesAvers" relation="typeID"/>
    <childNode name="SubtypesRevers" relation="typeID"/>
    <comboDelegate column="1" dict="nominals"/>
    <comboDelegate column="2" dict="metals"/>
    <comboDelegate column="5" dict="edges"/>
    <comboDelegate column="6" dict="issues"/>
  </node>
  
   <node name="SubtypesView" defaultSortColumn="2">
    <rowParamNames name="typeID"/>
    <mainChild name="VariantsView"/>
    <childNode name="VariantsView" relation="stID"/>
    <childNode name="subtypeReferencesView" relation="stID"/>
    <childNode name="CurrentCoinsView" relation="stID"/>
    <comboDelegate column="4" dict="mintYard"/>
    <comboDelegate column="6" dict="edges"/>
    <comboDelegate column="7" dict="aversSub"/>
    <comboDelegate column="8" dict="reversSub"/>
    <pictDelegate column="9"/>
    <widths>50 50 50 75 150 150 150 200 200 400 75 200</widths>
    <height>200</height>
  </node>

   <node name="SubtypesRevers">
    <listForm name="AversReversList"/>
    <fullForm name="AversReversFullInfo"/>
    <rowParamNames name="typeID"/>
    <childNode name="SubtypesView" relation="ReversID"/>
    <childNode name="variantRevers" relation="revID"/>
    <pictDelegate column="3"/>
  </node>

   <node name="SubtypesAvers">
    <listForm name="AversReversList"/>
    <fullForm name="AversReversFullInfo"/>
    <childNode name="SubtypesView" relation="AversID"/>
    <childNode name="variantAvers" relation="avID"/>
    <rowParamNames name="typeID"/>
    <pictDelegate column="3"/>
   </node>

   <node name="variantAvers">
    <listForm name="AversReversList"/>
    <fullForm name="AversReversFullInfo"/>
    <childNode name="VariantsView" relation="AversID"/>
    <pictDelegate column="4"/>
   </node>

   <node name="variantRevers">
    <listForm name="AversReversList"/>
    <fullForm name="AversReversFullInfo"/>
      <childNode name="VariantsView" relation="ReversID"/>
      <pictDelegate column="4"/>
    </node>

   <node name="VariantsView">
      <rowParamNames name="stID"/>
      <mainChild name="CurrentCoinsView"/>
      <childNode name="CurrentCoinsView" relation="varID"/>
      <childNode name="variantReferencesView" relation="varID"/>
      <comboDelegate column="3" dict="aversVar"/>
      <comboDelegate column="4" dict="reversVar"/>
      <pictDelegate column="2"/>
      <comboDelegate column="6" dict="mintYard"/>
      <comboDelegate column="5" dict="edges"/>
      <widths>50 50 400 150 150 75 200</widths>
      <height>200</height>
    </node>

   <node name="CurrentCoinsView">
     <mainChild name="CoinHistory"/>
      <childNode name="CoinPicture" relation="coin"/>
      <childNode name="CoinHistory" relation="coin"/>
      <rowParamNames name="stID"/>
      <rowParamNames name="varID"/>
      <comboDelegate column="5" dict="statuses"/>
      <pictDelegate column="3"/>
      <widths>50 50 50 400 150 150 100</widths>
      <height>200</height>
    </node>

   <node name="subtypeReferencesView">
    <listForm name="ReferencesView"/>
    <rowParamNames name="stID"/>
    <childNode name="SourcesList" relation=""/>
    <comboDelegate column="1" dict="sourceList"/>
   </node>

   <node name="variantReferencesView">
    <listForm name="ReferencesView"/>
    <rowParamNames name="varID"/>
    <childNode name="SourcesList"/>
    <comboDelegate column="1" dict="sourceList"/>
   </node>

   <node name="SourcesList"/>

   <node name="CoinHistory">
      <rowParamNames name="coin"/>
    </node>

   <node name="CoinPicture">
      <rowParamNames name="coin"/>
      <pictDelegate column="1"/>
   </node>

   <node name="attachStorage" isSystem="1">
      <pictDelegate column="1"/>
      <widths>200 400 200</widths>
      <height>200</height>
   </node>

   <node name="nominals" isSystem="1"/>
   <node name="metals" isSystem="1"/>
   <node name="issues" isSystem="1"/>
   <node name="edges" isSystem="1"/>
   <node name="statuses" isSystem="1"/>
   <node name="MintYard" isSystem="1"/>



   <comboBoxes>
    <!--IMPORTANT param регистрозависим!!! -->
     <item query = "select value from nominals order by value" name="nominals"/>
     <item query = "select value from metals order by value" name="metals"/>
     <item query = "select value from issues order by value" name="issues"/>
     <item query = "select value from edges order by value" name="edges"/>
     <item query = "select value from statuses" name="statuses"/>
     <item query = "select value from MintYard" name="MintYard"/>
     <item query = "select reduction from SourcesList order by reduction" name="sourceList"/>
     <item query = "select description from SubtypesAvers where typeID=%1" name="SubtypesAvers" param="typeID"/>
     <item query = "select description from SubtypesRevers where typeID=%1" name="SubtypesRevers" param="typeID"/> 
     <!-- следующие два делегата скорее всего неверны - нужно использовать не typeID, а stAvers\revers -->
     <item query = "select description from variantAvers where typeID=%1" name="variantAvers" param="TypesView.id"/>
     <item query = "select description from variantRevers where typeID=%1" name="variantRevers" param="TypesView.id"/>

   </comboBoxes>
  
</base>